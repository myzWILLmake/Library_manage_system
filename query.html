<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title>Manage Page</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
  <link rel="alternate icon" type="image/png" href="assets/i/favicon.png">
  <link rel="stylesheet" href="assets/css/amazeui.min.css"/>
  <style>
    .get {
      background: #1E5B94;
      color: #fff;
      text-align: center;
      padding: 100px 0;
    }

    .get-title {
      font-size: 200%;
      border: 2px solid #fff;
      padding: 20px;
      display: inline-block;
    }

    .get-btn {
      background: #fff;
    }

    .detail {
      background: #fff;
    }

    .detail-h2 {
      text-align: center;
      font-size: 150%;
      margin: 40px 0;
    }

    .detail-h3 {
      color: #1f8dd6;
    }

    .detail-p {
      color: #7f8c8d;
    }

    .detail-mb {
      margin-bottom: 30px;
    }

    .hope {
      background: #0bb59b;
      padding: 50px 0;
    }

    .hope-img {
      text-align: center;
    }

    .hope-hr {
      border-color: #149C88;
    }

    .hope-title {
      font-size: 140%;
    }

    .about {
      background: #fff;
      padding: 40px 0;
      color: #7f8c8d;
    }

    .about-color {
      color: #34495e;
    }

    .about-title {
      font-size: 180%;
      padding: 30px 0 50px 0;
      text-align: center;
    }

    .footer p {
      color: #7f8c8d;
      margin: 0;
      padding: 15px 0;
      text-align: center;
      background: #2d3e50;
    }
  </style>
</head>
<body>
<header class="am-topbar am-topbar-fixed-top">
  <div class="am-container">
    <h1 class="am-topbar-brand">
      <a href="#">Manage System</a>
    </h1>

    <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-secondary am-show-sm-only"
            data-am-collapse="{target: '#collapse-head'}"><span class="am-sr-only">导航切换</span> <span
        class="am-icon-bars"></span></button>

    <div class="am-collapse am-topbar-collapse" id="collapse-head">
      <ul class="am-nav am-nav-pills am-topbar-nav">
        <li class="am-active"><a href="query.html">查询</a></li>
        <li><a href="stock.html">入库</a></li>
        <li><a href="borrow.html">借书</a></li>
        <li><a href="return.html">还书</a></li>
        <li><a href="manage.html">管理</a></li>
      </ul>
    </div>
  </div>
</header>

<div class="am-g am-u-sm-centered">
  <div class="col-md-12 am-u-md-12 doc-content">
    <form class="am-form am-form-horizontal" onSubmit="return false;">
      <legend>图书查询</legend>
      <div class="am-form-group">
        <label class="am-u-sm-2">类别</label>
        <div class="am-u-sm-10">
          <input class="" id="query-book-category" placeholder="输入类别">
        </div>
      </div>

      <div class="am-form-group">
        <label class="am-u-sm-2">书名</label>
        <div class="am-u-sm-10">
          <input class="" id="query-book-bookname" placeholder="输入书名">
        </div>
      </div>

      <div class="am-form-group">
        <label class="am-u-sm-2">出版社</label>
        <div class="am-u-sm-10">
          <input class="" id="query-book-publish" placeholder="输入出版社">
        </div>
      </div>

      <div class="am-form-group">
        <label class="am-u-sm-2">年份</label>
        <div class="am-u-sm-10">
          <p><input class="" id="query-book-year-begin" placeholder="输入年份区间"> 至 
          <input class="" id="query-book-year-end" placeholder=""></p>
        </div>
      </div>

      <div class="am-form-group">
        <label class="am-u-sm-2">作者</label>
        <div class="am-u-sm-10">
          <input class="" id="query-book-author" placeholder="输入作者">
        </div>
      </div>

      <div class="am-form-group">
        <label class="am-u-sm-2">价格</label>
        <div class="am-u-sm-10">
          <p><input class="" id="query-book-price-begin" placeholder="输入价格区间"> 至 
          <input class="" id="query-book-price-end" placeholder=""></p>
        </div>
      </div>

      <button type="submit" class="am-btn am-btn-success" id="query-btn">提交</button>
    </form>

    <br />
    <legend>查询结果</legend>
    <div class="am-u-sm-12" id="div-table"></div>
  </div>
</div>


<!--[if lt IE 9]>
<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
<script src="assets/js/polyfill/rem.min.js"></script>
<script src="assets/js/polyfill/respond.min.js"></script>
<script src="assets/js/amazeui.legacy.js"></script>
<![endif]-->

<!--[if (gte IE 9)|!(IE)]><!-->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/amazeui.min.js"></script>
<script>
$(document).ready(function(){
  $("#query-btn").click(function(){


    var vcategory = $("#query-book-category").val();
    var vbookname = $("#query-book-bookname").val();
    var vpublish = $("#query-book-publish").val();
    var vyear_begin = $("#query-book-year-begin").val();
    var vyear_end = $("#query-book-year-end").val();
    var vauthor = $("#query-book-author").val();
    var vprice_begin = $("#query-book-price-begin").val();
    var vprice_end = $("#query-book-price-end").val();
    
    $.post("assets/php/query.php", 
           {
             category : vcategory,
             bookname : vbookname,
             publish : vpublish,
             year_begin : vyear_begin,
             year_end : vyear_end,
             author : vauthor,
             price_begin : vprice_begin,
             price_end : vprice_end
           },
          function(datas){
            var table_html = '<div class="am-u-sm-12" id="div-table"> <table class="am-table am-table-bordered am-table-striped am-table-hover"><thead><tr><th>书号</th><th>类别</th><th>书名</th><th>出版社</th><th>年份</th><th>作者</th><th>价格</th><th>数量</th></tr>';
             for (var x in datas)
             {
              table_html = table_html + '<tr><th>' + datas[x].bookid + '</th><th>' + datas[x].category + '</th><th>' + datas[x].bookname + '</th><th>' + datas[x].publish + '</th><th>' + datas[x].year + '</th><th>' + datas[x].author + '</th><th>' + datas[x].price + '</th><th>' + datas[x].amounts + '</th></tr>';
             }
             table_html = table_html + '</thead></table></div>';
             $("#div-table").html(table_html);
          },
          "json");

  });
});
</script>
<!--<![endif]-->
</body>
</html>
